<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laze Engine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #0b0d11; --card: #151821; --text: #ffffff; --accent: #00a3ff; --border: #252833; --dim: #9499aa; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }
        .side-nav { width: 70px; background: var(--card); border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding: 30px 0; }
        .nav-btn { font-size: 1.5rem; color: var(--dim); margin-bottom: 35px; cursor: pointer; }
        .nav-btn.active { color: var(--accent); }
        .main-wrapper { flex: 1; display: flex; flex-direction: column; }
        header { padding: 20px 40px; display: flex; justify-content: flex-end; }
        .coin-pill { background: var(--card); padding: 8px 16px; border-radius: 20px; border: 1px solid var(--border); font-weight: bold; }
        .view-container { flex: 1; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .hero { text-align: center; max-width: 400px; width: 100%; }
        .btn-link { background: var(--accent); color: white; border: none; padding: 16px; border-radius: 12px; font-weight: 700; width: 100%; cursor: pointer; }
        input { width: 100%; padding: 16px; background: var(--card); border: 1px solid var(--border); color: white; border-radius: 12px; margin-top: 15px; text-align: center; outline: none; }
        #pair-code { margin-top: 25px; font-size: 2.2rem; color: var(--accent); font-weight: 900; letter-spacing: 5px; }
    </style>
</head>
<body>
    <nav class="side-nav">
        <div class="nav-btn active"><i class="fas fa-home"></i></div>
        <div class="nav-btn" onclick="location.href='settings.html'"><i class="fas fa-cog"></i></div>
    </nav>
    <div class="main-wrapper">
        <header><div class="coin-pill">ðŸª™ <span id="user-coins">...</span></div></header>
        <div class="view-container">
            <div id="pairing-content" class="hero">
                <i class="fas fa-qrcode" style="font-size:4rem; color:var(--border); display:block; margin-bottom:20px;"></i>
                <h2>Laze Connection</h2>
                <button class="btn-link" style="margin-top:20px;" onclick="renderInput()">Link Device</button>
            </div>
        </div>
    </div>
    <script>
        async function loadUser() {
            const res = await fetch('/api/auth', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ user: "Lazebot", pass: "1234" })
            });
            const data = await res.json();
            document.getElementById('user-coins').innerText = data.coins;
        }
        function renderInput() {
            document.getElementById('pairing-content').innerHTML = `
                <input type="text" id="phoneNum" placeholder="23480...">
                <button class="btn-link" style="margin-top:15px" onclick="startPair()">Get Code</button>
                <div id="pair-code"></div>`;
        }
        async function startPair() {
            const num = document.getElementById('phoneNum').value;
            const res = await fetch('/api/get-pair', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ number: num, user: "Lazebot" })
            });
            const data = await res.json();
            if(data.code) {
                document.getElementById('pair-code').innerText = data.code;
                document.getElementById('user-coins').innerText = data.coins;
            } else { alert(data.error); }
        }
        window.onload = loadUser;
    </script>
</body>
</html>
